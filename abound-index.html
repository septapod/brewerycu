<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
    <meta name="googlebot" content="noindex, nofollow">
    <title>Abound CU | Our Strategic Journey</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Readex+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Customizing Tailwind to emulate Google Material 3 design principles
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                        display: ['Readex Pro', 'sans-serif'],
                    },
                    colors: {
                        // Material 3 Light Theme Palette (Abound Themed)
                        primary: '#4F3A7A', // Abound Purple
                        'on-primary': '#FFFFFF',
                        'primary-container': '#EADDFF',
                        'on-primary-container': '#21005D',
                        secondary: '#625B71',
                        'on-secondary': '#FFFFFF',
                        'secondary-container': '#E8DEF8',
                        'on-secondary-container': '#1D192B',
                        tertiary: '#006B5F', // Teal from logo dots
                        'on-tertiary': '#FFFFFF',
                        'tertiary-container': '#9CF2D8',
                        'on-tertiary-container': '#00201B',
                        error: '#B3261E',
                        'on-error': '#FFFFFF',
                        'error-container': '#F9DEDC',
                        'on-error-container': '#410E0B',
                        background: '#FFFBFE',
                        'on-background': '#1C1B1F',
                        surface: '#FFFBFE',
                        'on-surface': '#1C1B1F',
                        'surface-variant': '#E7E0EC',
                        'on-surface-variant': '#49454F',
                        outline: '#79747E',
                        'shadow-color': '#000000',
                    }
                }
            }
        }
    </script>
    <style>
        /* General body styles for M3 look and feel */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #FFFBFE; /* M3 Background */
            color: #1C1B1F; /* M3 On Background */
        }

        /* Elevation styles for M3 surfaces */
        .m3-surface-1 { 
            box-shadow: 0 1px 2px 0 rgba(0,0,0,0.1), 0 1px 3px 1px rgba(0,0,0,0.08); 
            transition: box-shadow 0.3s ease; 
        }
        .m3-surface-1:hover { 
            box-shadow: 0 1px 2px 0 rgba(0,0,0,0.2), 0 2px 6px 2px rgba(0,0,0,0.1); 
        }
        .m3-surface-2 { 
            box-shadow: 0 1px 2px 0 rgba(0,0,0,0.3), 0 2px 6px 2px rgba(0,0,0,0.15); 
        }

        /* Accordion animation styles */
        .chevron-icon { 
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        .expanded .chevron-icon { 
            transform: rotate(90deg); 
        }
        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0 1.5rem;
        }
        .expanded .step-content {
            max-height: 2000px; /* Increased for more content */
        }

        /* Cascade visualization styles */
        .cascade-container {
            min-height: 500px;
        }
        
        .cascade-stage {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .cascade-stage.active {
            background-color: #4F3A7A !important;
            color: #FFFFFF !important;
            border-color: #4F3A7A !important;
        }
        
        .cascade-stage:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .cascade-arrow {
            transition: opacity 0.3s ease;
        }
        
        .feedback-arrow {
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }
        
        .feedback-arrow:hover {
            opacity: 1;
        }
        
        .stage-flash {
            animation: flashHighlight 0.8s ease-in-out;
        }
        
        @keyframes flashHighlight {
            0%, 100% { background-color: transparent; }
            50% { background-color: #FFF3CD; }
        }
        
        .detail-content {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .detail-content.active {
            opacity: 1;
        }
        
        /* Mobile accordion styles for cascade */
        .cascade-accordion-item {
            border-bottom: 1px solid #E7E0EC;
        }
        
        .cascade-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
        }
        
        .cascade-accordion-content.open {
            max-height: 800px;
        }

        /* Status badge styles */
        .status-completed {
            background-color: #9CF2D8;
            color: #00201B;
        }
        .status-upcoming {
            background-color: #E8DEF8;
            color: #1D192B;
        }

        /* Process stepper styles */
        .process-step-content {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out;
        }
        
        .process-step-content.active {
            max-height: 400px;
            opacity: 1;
        }
        
        .process-step-header.active .step-circle {
            background-color: #4F3A7A !important;
            border-color: rgba(79, 58, 122, 0.5) !important;
        }
        
        .process-step-header.active .step-icon {
            color: #FFFFFF !important;
        }

        /* Cascade active state styling */
        .cascade-stage.active {
            background-color: #6750A4 !important;
            border-color: #6750A4 !important;
            transform: scale(1.02);
            box-shadow: 0 8px 24px rgba(103, 80, 164, 0.3) !important;
        }
        
        .cascade-stage.active h3 {
            color: #FFFFFF !important;
        }
        
        .cascade-stage.active .text-xs {
            color: rgba(255, 255, 255, 0.8) !important;
        }

        /* Responsive cascade layout */
        @media (max-width: 640px) {
            .cascade-mobile {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-surface/80 backdrop-blur-lg sticky top-0 z-50 border-b border-surface-variant/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-3">
                    <img src="attached_assets/aboundcu-logo-transparent.png" alt="Abound Credit Union Logo" class="h-10" onerror="this.onerror=null;this.src='https://placehold.co/150x40/4F3A7A/FFFFFF?text=Abound';">
                </div>
                <div class="hidden md:block">
                     <span class="font-display text-sm font-medium text-on-surface-variant">Playing to Win | Strategy Roadmap</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Menu -->
    <nav class="bg-surface border-b border-surface-variant/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-center py-4">
                <div class="flex flex-wrap justify-center gap-4 sm:gap-6 text-sm">
                    <button data-target="context" class="nav-button text-on-surface-variant hover:text-primary transition-colors font-medium cursor-pointer">Where We Are</button>
                    <button data-target="cascade" class="nav-button text-on-surface-variant hover:text-primary transition-colors font-medium cursor-pointer">5 Questions</button>
                    <button data-target="process" class="nav-button text-on-surface-variant hover:text-primary transition-colors font-medium cursor-pointer">6 Step Process</button>
                    <button data-target="journey" class="nav-button text-on-surface-variant hover:text-primary transition-colors font-medium cursor-pointer">Our Journey</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <div id="hero" class="relative bg-surface-variant/20">
            <div class="max-w-4xl mx-auto text-center py-20 sm:py-24 px-4 sm:px-6 lg:px-8">
                <p class="font-display text-base font-semibold text-primary tracking-wide uppercase">Our Strategic Journey</p>
                <h1 class="mt-2 text-4xl sm:text-5xl font-bold font-display text-on-surface tracking-tight">A Clear Roadmap to Winning at Abound</h1>
                <p class="mt-6 max-w-2xl mx-auto text-lg text-on-surface-variant">
                    This guide connects our foundational work, the steps ahead, and the winning outcome we're building together, grounding our process in the proven 'Playing to Win' methodology.
                </p>
                
                <!-- YouTube Video Embed -->
                <div class="mt-8 max-w-2xl mx-auto">
                    <div class="relative aspect-video rounded-xl overflow-hidden shadow-lg">
                        <iframe 
                            src="https://www.youtube.com/embed/3vAIur-N8gM?si=rnd1BACajvpAywcB" 
                            title="Playing to Win Strategy Framework" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen
                            class="absolute inset-0 w-full h-full">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>

        <!-- Current Status & Next Steps -->
        <div id="context" class="bg-primary-container/10 py-12 sm:py-16">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold font-display text-on-surface">Where We Are Now</h2>
                    <p class="mt-2 text-lg text-on-surface-variant">Midway through our strategic journey with clear momentum</p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-surface rounded-xl p-6 m3-surface-1">
                        <div class="flex items-center mb-4">
                            <div class="w-3 h-3 rounded-full bg-tertiary-container mr-3"></div>
                            <h3 class="font-display font-semibold text-on-surface">Completed</h3>
                        </div>
                        <ul class="list-disc list-outside ml-5 space-y-2 text-sm text-on-surface-variant">
                            <li>Established shared understanding of Playing to Win framework</li>
                            <li>Documented current strategy using the 5-box cascade</li>
                            <li>Conducted leadership interviews to identify key challenges</li>
                            <li>Refined strategic problem through deep discussion</li>
                        </ul>
                    </div>
                    
                    <div class="bg-surface rounded-xl p-6 m3-surface-1">
                        <div class="flex items-center mb-4">
                            <div class="w-3 h-3 rounded-full bg-primary-container mr-3"></div>
                            <h3 class="font-display font-semibold text-on-surface">Next Steps</h3>
                        </div>
                        <ul class="list-disc list-outside ml-5 space-y-2 text-sm text-on-surface-variant">
                            <li><strong>July 14th:</strong> Generate strategic possibilities (Workshop 2.5)</li>
                            <li><strong>July 17:</strong> Selecting possibilities & board engagement (Workshop 3)</li>
                            <li><strong>July-Aug:</strong> Design and conduct strategic tests</li>
                            <li><strong>August 22-23:</strong> Make final strategic choices & develop action plan (Workshop 4)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-8 bg-secondary-container/20 rounded-xl p-6 border border-secondary-container/40">
                    <h3 class="font-display font-semibold text-on-surface mb-3 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                        </svg>
                        Our Defined Strategic Problem
                    </h3>
                    <div class="text-on-surface-variant">
                        <p class="text-lg font-medium mb-3">Abound's digital and self-service experiences currently fall short of member expectations for seamless, intuitive interactions.</p>
                        <p class="mb-3">This is due to the following reasons:</p>
                        <ul class="list-disc list-inside space-y-2 ml-4">
                            <li>Data integration is inconsistent depending on the product and vendor, which creates challenges across services</li>
                            <li>Data architecture limits our ability to make changes quickly</li>
                            <li>Technology prioritization often focuses on shorter-term financial goals</li>
                            <li>Fintechs and leading competitors shape member expectations</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 1: The 5 Questions of Strategy (Cascade Visual) -->
        <div id="cascade" class="bg-surface py-16 sm:py-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold font-display tracking-tight text-on-surface sm:text-4xl">Five Key Questions</h2>
                    <p class="mt-4 text-lg text-on-surface-variant max-w-3xl mx-auto">
                        The Playing to Win framework consists of five integrated questions that cascade from top to bottom, but also reinforce each other through feedback loops. Click any stage to explore the details.
                    </p>
                    
                    <!-- Five Key Questions in PTW Format -->
                    <div class="mt-8 max-w-4xl mx-auto">
                        <ol class="ptw-questions text-left space-y-4 bg-surface-variant/30 rounded-xl p-6">
                            <li class="flex items-start space-x-3">
                                <span class="flex-shrink-0 w-8 h-8 bg-primary text-on-primary rounded-full flex items-center justify-center text-sm font-bold">1</span>
                                <div>
                                    <strong class="text-primary">What is our winning aspiration?</strong> What future for Abound Credit Union and its members will clearly define "winning"?
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="flex-shrink-0 w-8 h-8 bg-secondary text-on-secondary rounded-full flex items-center justify-center text-sm font-bold">2</span>
                                <div>
                                    <strong class="text-secondary">Where will we play?</strong> Which member segments, product categories, channels, and geographies will we prioritize?
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="flex-shrink-0 w-8 h-8 bg-secondary text-on-secondary rounded-full flex items-center justify-center text-sm font-bold">3</span>
                                <div>
                                    <strong class="text-secondary">How will we win?</strong> How will Abound deliver superior member value versus competitors and alternatives?
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="flex-shrink-0 w-8 h-8 bg-tertiary text-on-tertiary rounded-full flex items-center justify-center text-sm font-bold">4</span>
                                <div>
                                    <strong class="text-tertiary">What capabilities must be in place?</strong> Which distinctive skills and assets will turn the above choices into reality?
                                </div>
                            </li>
                            <li class="flex items-start space-x-3">
                                <span class="flex-shrink-0 w-8 h-8 bg-tertiary text-on-tertiary rounded-full flex items-center justify-center text-sm font-bold">5</span>
                                <div>
                                    <strong class="text-tertiary">What management systems support those capabilities?</strong> Which measures, processes, and incentives will keep us on track?
                                </div>
                            </li>
                        </ol>
                    </div>
                </div>
                
                <!-- Desktop Two-Panel Layout -->
                <div class="hidden md:grid md:grid-cols-5 gap-8 cascade-container">
                    <!-- Left Panel: Cascade Navigator -->
                    <div class="col-span-2">
                        <div id="cascade-navigator" class="space-y-4">
                            <!-- Stages will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Right Panel: Detail View -->
                    <div class="col-span-3">
                        <div id="cascade-detail-view" class="bg-surface-variant/30 rounded-xl p-6 sticky top-20" role="region" aria-label="Abound Credit Union's strategy cascade: winning aspiration leads to where to play leads to how to win leads to required capabilities leads to supporting management systems">
                            <!-- Detail content will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Mobile Accordion Layout -->
                <div class="md:hidden">
                    <div id="cascade-accordion" class="space-y-2">
                        <!-- Accordion items will be populated by JavaScript -->
                    </div>
                </div>
                

            </div>
        </div>

        <!-- Section 1.5: The Playing to Win Process Overview -->
        <div id="process" class="bg-surface-variant/20 py-16 sm:py-20">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-3xl font-bold font-display tracking-tight text-on-surface sm:text-4xl">The Abound Credit Union Playing-to-Win Process</h2>
                    <p class="mt-4 text-lg text-on-surface-variant max-w-3xl mx-auto">
                        Abound's journey follows a structured process designed to combine creative thinking with rigorous analysis, moving from broad ideas to a single, powerful choice for members. Click each step to learn more.
                    </p>
                </div>
                <div id="process-overview-container" class="mt-12">
                    <!-- Stepper will be dynamically inserted here -->
                </div>
            </div>
        </div>
        
        <!-- Section 2: The Strategic Journey (Interactive Accordion) -->
        <div id="journey" class="bg-surface-variant/20 py-16 sm:py-20">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold font-display tracking-tight text-on-surface sm:text-4xl">Our Strategic Journey</h2>
                    <p class="mt-4 text-lg text-on-surface-variant">An interactive look at our step-by-step process.</p>
                </div>
                
                <div id="journey-steps-container" class="space-y-4">
                    <!-- Steps will be dynamically inserted here by JavaScript -->
                </div>
            </div>
        </div>


    </main>

    <!-- Footer -->
    <footer class="bg-surface-variant/20" aria-labelledby="footer-heading">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center text-sm text-on-surface-variant">
            DXN 
        </div>
    </footer>

    <script>
        console.log('JavaScript execution started');
        // Data for the Process in Six Steps
        const processOverviewData = [
            { 
                id: 1, 
                title: "Describe Our Current Strategy", 
                what: "We articulate our current strategy using the 5-box cascade framework. This creates a shared, honest snapshot of our business as it operates today.", 
                why: "We must have an objective, shared understanding of our starting point. Without this baseline, it's difficult to generate new possibilities that are truly different from what we're already doing.", 
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/></svg>`
            },
            { 
                id: 2, 
                title: "Define the Core Strategic Problem", 
                what: "We identify and agree upon the single most critical challenge or opportunity that our future strategy must address.", 
                why: "A well-defined problem is half the solution. A vague problem leads to a vague strategy. This step is essential for ensuring our entire strategic effort is aimed at the right target.", 
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5,14H20.5L22,15.5V20.5L20.5,22H15.5L14,20.5V15.5L15.5,14M16,16V20H20V16H16M10.09,15.59L11.5,17L8.5,20L7.09,18.59L10.09,15.59M4.93,5.93C3.12,7.74 3.12,10.77 4.93,12.58L7.76,15.41L12.58,10.59L9.75,7.76C7.94,5.95 4.91,5.95 4.93,5.93Z"/></svg>`
            },
            { 
                id: 3, 
                title: "Generate Strategic Possibilities", 
                what: "We creatively brainstorm multiple, distinct ways we could solve our core strategic problem. Each possibility is a 'happy story' about a potential future.", 
                why: "This is an intentionally expansive step. The goal is to explore a range of ideas to ensure we don't prematurely lock onto the first or most obvious solution.", 
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M9,10V12H7V10H9M13,10V12H11V10H13M17,10V12H15V10H17M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H6V1H8V3H16V1H18V3H19M19,19V8H5V19H19M9,14V16H7V14H9M13,14V16H11V14H13M17,14V16H15V14H17Z"/></svg>`
            },
            { 
                id: 4, 
                title: "Specify the Conditions for Success", 
                what: "For each possibility, we ask: 'For this to be a winning strategy, what would have to be true?' We list all the conditions that must hold for that possibility to succeed.", 
                why: "This 'Reverse Engineering' step shifts the conversation from debate to collaborative exploration. It allows the team to understand the underlying logic of each possibility before judging it.", 
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M16,11H18A2,2 0 0,1 20,13V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V13A2,2 0 0,1 6,11H8V7A4,4 0 0,1 12,3A4,4 0 0,1 16,7V11M12,5A2,2 0 0,0 10,7V11H14V7A2,2 0 0,0 12,5Z"/></svg>`
            },
            { 
                id: 5, 
                title: "Identify Barriers and Design Tests", 
                what: "We review the conditions for each possibility and identify the 1-2 we are most worried about. We then design simple, targeted 'guerrilla tests' to gather real-world evidence.", 
                why: "This is the heart of the process's rigor and efficiency. Instead of analyzing everything, we focus only on the analysis that matters most, saving time and de-risking our final decision.", 
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M16.53,11.06L15.47,10L10.59,14.88L8.47,12.76L7.41,13.82L10.59,17L16.53,11.06Z"/></svg>`
            },
            { 
                id: 6, 
                title: "Make the Choice and Refine the Strategy", 
                what: "We review the results from our tests. Based on the evidence, we choose the strategic possibility that has the highest probability of success and refine its 5-box strategy cascade.", 
                why: "The evidence from the tests makes the final decision clearer and less political. The choice is based on what we've learned, not just on opinion, which builds conviction and alignment.", 
                icon: `<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M12,2C13.1,2 14,2.9 14,4C14,5.1 13.1,6 12,6C10.9,6 10,5.1 10,4C10,2.9 10.9,2 12,2M21,9V7L15,1H5C3.89,1 3,1.89 3,3V21A2,2 0 0,0 5,23H19A2,2 0 0,0 21,21V9M19,9H14V4H5V21H19V9Z"/></svg>`
            }
        ];

        // Data for the cascade visualization
        const cascadeData = [
            { 
                id: 'aspiration', 
                title: 'What is our winning aspiration?', 
                content: 'What future for Abound Credit Union and its members will clearly define "winning"?',
                details: [
                    'Plays to <strong>win</strong> with members‚Äîand against rivals‚Äînot just to "compete".',
                    'Starts with member value, not internal financial targets.',
                    'States winning in clear, concrete terms (e.g., #1 member satisfaction).',
                    'Inspires and aligns the entire Abound team toward that bold future.',
                    'Anchors every other strategic choice in the cascade.'
                ],
                feedbackTo: null
            },
            { 
                id: 'where', 
                title: 'Where will we play?', 
                content: 'Which member segments, product categories, channels, and geographies will we prioritize?',
                details: [
                    'Names the member segments we will serve‚Äîand those we won\'t.',
                    'Specifies the products & services we\'ll offer them.',
                    'Selects the delivery channels (branches, digital, partners) we\'ll use.',
                    'Defines our geographic focus within Abound\'s field of membership.',
                    'Clarifies vertical scope (origination, servicing, partnerships, etc.).'
                ],
                feedbackTo: 'aspiration'
            },
            { 
                id: 'how', 
                title: 'How will we win?', 
                content: 'How will Abound deliver superior member value versus competitors and alternatives?',
                details: [
                    'Describes the sustainable competitive edge (cost or differentiation).',
                    'Shows how we\'ll deliver superior value to members versus competitors.',
                    'Reinforces the chosen where-to-play arenas.',
                    'Explains why the advantage will last over time.',
                    'Guides priority investments and capability building.'
                ],
                feedbackTo: 'where'
            },
            { 
                id: 'capabilities', 
                title: 'What capabilities must be in place?', 
                content: 'Which distinctive skills and assets will turn the above choices into reality?',
                details: [
                    'Lists the 4-5 critical capabilities Abound must master to deliver the strategy.',
                    'Directly enable the where-to-play and how-to-win choices.',
                    'Are distinctive versus peers and hard to copy.',
                    'Reinforce one another across the credit union.',
                    'Require focused investment or partner development.'
                ],
                feedbackTo: 'how'
            },
            { 
                id: 'systems', 
                title: 'What management systems support those capabilities?', 
                content: 'Which measures, processes, and incentives will keep us on track?',
                details: [
                    'Identifies the key systems (planning, budgeting, talent, member feedback) that reinforce our capabilities.',
                    'Embeds the winning aspiration and strategic choices in everyday decisions.',
                    'Provides metrics that track progress toward winning with members.',
                    'Aligns resource allocation and incentives with strategic priorities.',
                    'Enables fast learning and course correction as conditions change.'
                ],
                feedbackTo: 'capabilities'
            }
        ];

        const journeyStepsData = [
            {
                id: 1,
                title: "Workshop 1: Foundation Setting",
                status: "completed",
                workshop_date: "March 18, 2025 (virtual, SLT Only)",
                goals: [
                    "Develop a shared understanding of the Playing to Win framework.",
                    "Articulate Abound's current strategy using the 5-box cascade."
                ],
                accomplishments: "Successfully established a common language and a clear, objective baseline of where we are today.",
                whyThisMatters: "Strategy work must start with an objective view of the status quo. Without this step, teams often struggle to generate possibilities that are truly new or different. This ensures we build from a place of shared reality and avoid making unexamined assumptions about our current business.",
                icon: 'üèóÔ∏è',
                cascadeOutput: {
                    aspiration: [
                        "Become central Kentucky's most-trusted financial partner, known for personalized, community-centered service.",
                        "Hold the #1 market share in home-mortgage lending and the #1 position in financial-education outreach.",
                        "Deliver these results while maintaining industry-leading safety and soundness."
                    ],
                    where: [
                        "<strong>Core Audience:</strong> Middle-income Kentuckians, military personnel, students, and local small businesses.",
                        "<strong>Geography:</strong> Central Kentucky, expanding along the I-65 corridor.",
                        "<strong>Channels:</strong> Integrated digital services (mobile/online) and expanding modern branches.",
                        "<strong>Offering:</strong> Personalized financial services, including competitive deposit/loan products and financial education."
                    ],
                    how: [
                        "<strong>Financial Education:</strong> Lead through deep local partnerships and well-designed curricula.",
                        "<strong>High-Touch Service:</strong> Staff empowered to approve loans quickly and resolve issues immediately.",
                        "<strong>Trustworthy Brand:</strong> Approachable branding as a locally-focused, trusted neighbor.",
                        "<strong>Financial Discipline:</strong> Strong capital, low delinquencies, and lean costs."
                    ],
                    capabilities: [
                        "Rigorous, balanced lending that meets member needs.",
                        "Customizable financial education outreach and curricula.",
                        "Empowered, relationship-focused teams with strong support.",
                        "Marketing analytics to generate data-driven insights.",
                        "Ongoing financial oversight for swift, informed adjustments."
                    ],
                    systems: [
                        "Board retreat & quarterly reviews anchored by a five-year roadmap.",
                        "Monthly KPI dashboard (ROA, capital, loan growth, etc.).",
                        "Talent, tech, and community-impact scorecards."
                    ]
                }
            },
            {
                id: 2,
                title: "Workshop 2: Defining the Strategic Problem",
                status: "completed",
                workshop_date: "May 21, 2025 (virtual, SLT Only)",
                goals: [
                    "Finalize the strategic problem.",
                    "Frame strategic choices clearly.",
                    "Generate initial strategic possibilities."
                ],
                accomplishments: "After deep and necessary discussion, we refined our initial problem statement to get to the true heart of the challenge facing Abound. Most of the session was spent rearticulating the initially selected strategic problem.",
                outcome: "Abound's digital and self-service experiences currently fall short of member expectations for seamless, intuitive interactions.\n\nThis is due to the following reasons:\n- Data integration is inconsistent depending on the product and vendor, which creates challenges across services\n- Data architecture limits our ability to make changes quickly\n- Technology prioritization often focuses on shorter-term financial goals\n- Fintechs and leading competitors shape member expectations.",
                whyThisMatters: "Framing the problem is often more difficult than solving it. A well-defined problem prevents us from creating a vague strategy that doesn't address our most pressing issue. The hard work here was crucial to ensure our entire strategy is aimed at the right target.",
                refinement: "Original problem: 'Abound's technology and digital experiences are not keeping pace with strategic needs and member expectations.' ‚Üí Refined through extensive discussion to the current, more specific formulation.",
                workshopOutput: {
                    strategicProblem: "Abound's digital and self-service experiences currently fall short of member expectations for seamless, intuitive interactions.",
                    strategicProblemDetails: [
                        "Data integration is inconsistent depending on the product and vendor, which creates challenges across services",
                        "Data architecture limits our ability to make changes quickly",
                        "Technology prioritization often focuses on shorter-term financial goals",
                        "Fintechs and leading competitors shape member expectations"
                    ],
                    strategicChoices: [
                        {
                            title: "Choice Path A: Mastering Member Must-Haves",
                            description: "We will invest in our foundational data and technology to deliver exceptionally reliable and seamless self-service for core member interactions. We will win by eliminating friction on essential digital banking services, reducing attrition, and solidifying our reputation for dependability.",
                            rationale: "Members leave when basic digital interactions fail. This path is about reliably and flawlessly delivering digital interactions that our members see as baseline, non-negotiable expectations."
                        },
                        {
                            title: "Choice Path B: Creating a Uniquely Abound Digital Experience",
                            description: "We will focus technology resources on developing tailored digital solutions based on deep insight into our key member segments (rural, military, younger). We will win by solving their unique challenges and creating indispensable experiences, building unmatched loyalty through differentiation.",
                            rationale: "To compete long-term, Abound must create digital experiences uniquely tailored to your members‚Äîparticularly rural, military, and younger segments‚Äîaddressing specific needs and building loyalty competitors can't easily replicate."
                        }
                    ]
                },
                icon: 'üéØ'
            },
            {
                id: 3,
                title: "Workshop 2.5: Generating Possibilities",
                status: "current",
                workshop_date: "July 14th, 2025 (virtual, SLT Only)",
                goals: [
                    "Finalize Strategic Problem",
                    "Confirm Strategic Choices", 
                    "Generate Initial Strategic Possibilities"
                ],
                whyThisMatters: "This is a purely creative and expansive step where we will generate multiple 'happy stories' about our future. We will encourage a range of ideas to ensure we don't prematurely lock onto a single path, but instead consider multiple distinct ways we could win.",
                note: "This interim workshop bridges the gap between problem definition and solution exploration, ensuring we have a solid foundation before moving to full possibility generation.",
                icon: 'üí°'
            },
            {
                id: 4,
                title: "Workshop 3: Board Engagement & Possibility Selection",
                status: "upcoming",
                workshop_date: "July 17, 2025 (on-site, SLT + Board)",
                goals: [
                    "Share progress and feedback with Abound's board of directors",
                    "Generate additional strategic possibilities",
                    "Select priority possibilities for testing",
                    "Draft strategy cascades for selected possibilities"
                ],
                whyThisMatters: "Board engagement ensures alignment at the highest level, while possibility selection focuses our analysis efforts. This workshop balances creative expansion with practical focus, setting up efficient testing phases.",
                challenge: "Time constraints will require tight facilitation to achieve all goals. Priority will be given to board alignment and possibility selection.",
                icon: 'üèõÔ∏è'
            },
            {
                id: 5,
                title: "Testing Possibilities",
                status: "upcoming", 
                workshop_date: "July-August 2025",
                goals: [
                    "Specify conditions that must be true for each priority possibility",
                    "Identify key barriers to choosing each possibility", 
                    "Design tests to validate assumptions about each barrier",
                    "Assign Executive Champions to lead testing efforts"
                ],
                whyThisMatters: "This preparation phase is fundamental for Workshop 4 success. By pre-designing our tests and assigning ownership, we ensure the final workshop can focus on decision-making rather than analysis design.",
                process: [
                    { step: "Specify Conditions", desc: "What must be true for this to be a winning strategy?" },
                    { step: "Identify Barriers", desc: "Pinpoint the 1-3 most worrisome assumptions." },
                    { step: "Design Tests", desc: "Create focused 'guerrilla tests' to validate key assumptions." }
                ],
                icon: 'üî¨'
            },
            {
                id: 6,
                title: "Workshop 4: Strategic Decision & Implementation Planning",
                status: "upcoming",
                workshop_date: "August 22‚Äì23, 2025 (on-site, Board + SLT)",
                goals: [
                    "Discuss test results and synthesize findings",
                    "Make final strategic choices based on evidence",
                    "Refine Abound's winning strategy cascade",
                    "Plan strategy communication approach",
                    "Design capability building and management systems",
                    "Ensure Executive Leadership Team feels empowered and ready to execute",
                ],
                whyThisMatters: "This is the culmination of our work. Armed with evidence from our tests, we make the integrated set of choices that will define Abound's strategy for 2026 and beyond. The Playing to Win framework ensures these choices reinforce each other and create a coherent, powerful approach to winning.",
                outcome: "Executive Leadership Team leaves with complete clarity, confidence, and a concrete action plan for implementing Abound's new 5-Year Strategy.",
                icon: 'üöÄ'
            }
        ];

        // --- RENDER CASCADE VISUAL ---
        function renderCascadeVisual() {
            const container = document.getElementById('cascade-visual-container');
            if (!container) return;
            
            let html = '<div class="w-full max-w-2xl mx-auto h-full relative">';
            const boxWidth = 240; 
            const boxHeight = 72;
            const containerWidth = container.clientWidth;

            cascadeData.forEach((item, index) => {
                const isLeft = index % 2 === 0;
                const topPercent = index * 18;
                
                html += `
                    <div class="cascade-item absolute group" style="top: ${topPercent}%; ${isLeft ? `left: 0;` : `right: 0;`} width: ${boxWidth}px;">
                        <div class="relative">
                            <div class="cascade-box bg-primary-container text-on-primary-container p-4 rounded-xl m3-surface-1 text-center cursor-pointer">
                                <h4 class="font-display font-semibold text-sm sm:text-base">${item.title}</h4>
                            </div>
                            <div class="cascade-tooltip absolute z-10 w-56 p-3 mt-2 text-sm leading-tight text-on-primary bg-secondary rounded-xl shadow-lg" style="${isLeft ? 'left: 0;' : 'right: 0;'}">
                                ${item.explanation}
                            </div>
                        </div>
                    </div>
                `;

                // Add connecting arrows only if it's not the last item
                if (index < cascadeData.length - 1) {
                    const arrowTop = topPercent + (boxHeight / container.clientHeight * 100) / 2 + 5;
                    const arrowHeight = 18; // Height of the arrow connection as percentage of container height
                    const arrowWidth = (containerWidth - 2 * boxWidth) / containerWidth * 100;

                    let pathD, arrowTransform;

                    if (isLeft) {
                        pathD = `M 0,0 C 50,20 50,80 100,100`;
                        arrowTransform = `top: ${arrowTop}%; left: ${boxWidth}px; width: calc(100% - ${2 * boxWidth}px); height:${arrowHeight}%`
                    } else {
                        pathD = `M 100,0 C 50,20 50,80 0,100`;
                         arrowTransform = `top: ${arrowTop}%; right: ${boxWidth}px; width: calc(100% - ${2 * boxWidth}px); height:${arrowHeight}%`
                    }
                    
                    const arrowSvg = `
                        <svg class="absolute text-outline/40" style="${arrowTransform}" viewbox="0 0 100 100" preserveAspectRatio="none">
                           <path d="${pathD}" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="4 4" />
                        </svg>`;
                    html += arrowSvg;
                }
            });
            html += '</div>';
            container.innerHTML = html;
        }

        
        // --- RENDER JOURNEY STEPS ACCORDION ---
        const journeyContainer = document.getElementById('journey-steps-container');

        // Function to create status pill classes
        function getStatusClasses(status) {
            switch (status) {
                case 'completed': return 'bg-tertiary-container text-on-tertiary-container';
                case 'current': return 'bg-primary-container text-on-primary-container';
                case 'upcoming': return 'bg-yellow-200/60 text-yellow-900';
                default: return 'bg-surface-variant text-on-surface-variant';
            }
        }
        
        // Function to create status pill classes
        function getStatusClasses(status) {
            switch (status) {
                case 'completed': return 'bg-tertiary-container text-on-tertiary-container';
                case 'current': return 'bg-primary-container text-on-primary-container';
                case 'upcoming': return 'bg-yellow-200/60 text-yellow-900';
                default: return 'bg-surface-variant text-on-surface-variant';
            }
        }
        
        // Note: Journey steps are now created by the createJourneySteps() function called in DOMContentLoaded
        // (Removed conflicting forEach loop that was overriding the proper rendering)
        
        /* REMOVED: Legacy conflicting forEach loop that was overriding createJourneySteps()
        function legacyForEach_REMOVED() {
        journeyStepsData.forEach(step => {
            console.log('Processing step:', step.id, step.title, 'Has workshopOutput:', !!step.workshopOutput);
            const stepElement = document.createElement('div');
            stepElement.className = 'bg-surface rounded-2xl m3-surface-1 overflow-hidden';
            if (step.status === 'current') {
              stepElement.classList.add('ring-2', 'ring-primary', 'ring-offset-2', 'ring-offset-background');
            }
            
            let goalsHtml = step.goals ? `
                <div class="mt-12">
                    <h4 class="font-medium text-on-surface-variant mb-4">Goals:</h4>
                    <ul class="list-disc list-outside ml-5 text-on-surface-variant space-y-2">
                        ${step.goals.map(goal => `<li>${goal}</li>`).join('')}
                    </ul>
                </div>` : '';

            let processHtml = step.process ? `
                <div class="mt-8">
                    <h4 class="font-medium text-on-surface-variant mb-4">Key Process: Reverse Engineering</h4>
                    <div class="grid sm:grid-cols-3 gap-3">
                        ${step.process.map(p => `
                            <div class="bg-surface-variant/40 rounded-xl p-4">
                                <h5 class="font-medium text-sm text-on-surface">${p.step}</h5>
                                <p class="text-sm text-on-surface-variant mt-1">${p.desc}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>` : '';

            let outcomeHtml = step.outcome ? `
                <div class="mt-6 bg-secondary-container/50 rounded-lg p-4 border border-secondary-container">
                    <h4 class="text-sm font-medium text-on-secondary-container mb-1">Defined Challenge:</h4>
                    <p class="text-on-secondary-container italic">"${step.outcome}"</p>
                </div>` : '';
            
            let accomplishmentHtml = (step.accomplishments && step.accomplishments !== 'undefined' && step.accomplishments.trim() !== '') ? `
                <div class="mt-6">
                    <h4 class="font-medium text-on-surface mb-2">Key Accomplishments:</h4>
                    <p class="text-on-surface-variant">${step.accomplishments}</p>
                </div>` : '';

            let refinementHtml = step.refinement ? `
                <div class="mt-6 bg-tertiary-container/30 rounded-lg p-4 border border-tertiary-container/60">
                    <h4 class="text-sm font-medium text-on-tertiary-container mb-1">Problem Refinement Process:</h4>
                    <p class="text-on-tertiary-container/90 text-sm">${step.refinement}</p>
                </div>` : '';

            let noteHtml = step.note ? `
                <div class="mt-6 bg-primary-container/30 rounded-lg p-4 border border-primary-container/60">
                    <h4 class="text-sm font-medium text-on-primary-container mb-1">Important Note:</h4>
                    <p class="text-on-primary-container/90 text-sm">${step.note}</p>
                </div>` : '';

            let challengeHtml = step.challenge ? `
                <div class="mt-6 bg-error-container/30 rounded-lg p-4 border border-error-container/60">
                    <h4 class="text-sm font-medium text-on-error-container mb-1 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                        Implementation Challenge
                    </h4>
                    <p class="text-on-error-container/90 text-sm">${step.challenge}</p>
                </div>` : '';

            let finalOutcomeHtml = step.outcome && step.id === 6 ? `
                <div class="mt-6 bg-tertiary-container/40 rounded-lg p-4 border border-tertiary-container">
                    <h4 class="text-sm font-medium text-on-tertiary-container mb-1">Expected Outcome:</h4>
                    <p class="text-on-tertiary-container/90 text-sm font-medium">${step.outcome}</p>
                </div>` : '';

            let whyThisMattersHtml = step.whyThisMatters ? `
                 <div class="mt-6 bg-primary-container/20 rounded-lg p-4 border border-primary-container/40">
                     <h4 class="text-sm font-medium text-on-primary-container mb-1 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg>
                        Why This Step Matters
                    </h4>
                    <p class="text-on-primary-container/80 text-sm">${step.whyThisMatters}</p>
                </div>` : '';
            
            let cascadeHtml = '';
            if (step.cascadeOutput) {
                const { aspiration, where, how, capabilities, systems } = step.cascadeOutput;
                cascadeHtml = `
                    <div class="mt-8">
                         <h4 class="font-medium text-on-surface-variant mb-4">Workshop 1 Output: Current Strategy Cascade</h4>
                         <div class="space-y-6">
                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                <h5 class="font-bold text-sm text-primary mb-2">What is our Winning Aspiration?</h5>
                                <ul class="list-disc list-outside ml-5 text-on-surface-variant text-sm space-y-1">
                                    ${aspiration.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                <h5 class="font-bold text-sm text-primary mb-2">Where Will We Play?</h5>
                                <ul class="list-disc list-outside ml-5 text-on-surface-variant text-sm space-y-1">
                                    ${where.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                <h5 class="font-bold text-sm text-primary mb-2">How Will We Win?</h5>
                                <ul class="list-disc list-outside ml-5 text-on-surface-variant text-sm space-y-1">
                                    ${how.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                <h5 class="font-bold text-sm text-primary mb-2">What Capabilities Must We Have?</h5>
                                <ul class="list-disc list-outside ml-5 text-on-surface-variant text-sm space-y-1">
                                    ${capabilities.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                <h5 class="font-bold text-sm text-primary mb-2">What Management Systems Do We Need?</h5>
                                <ul class="list-disc list-outside ml-5 text-on-surface-variant text-sm space-y-1">
                                    ${systems.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                         </div>
                    </div>
                `;
            }

            let workshopOutputHtml = '';
            if (step.workshopOutput) {
                console.log('Found workshopOutput for step:', step.id, step.workshopOutput);
                const { strategicProblem, strategicProblemDetails, strategicChoices } = step.workshopOutput;
                workshopOutputHtml = `
                    <div class="mt-8">
                         <h4 class="font-medium text-on-surface-variant mb-4">Workshop 2 Output: Strategic Problem & Choices</h4>
                         <div class="space-y-6">
                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                <h5 class="font-bold text-sm text-primary mb-2">Strategic Problem</h5>
                                <p class="text-lg font-medium mb-3 text-on-surface">${strategicProblem}</p>
                                <p class="mb-3 text-on-surface-variant text-sm">This is due to:</p>
                                <ul class="list-disc list-inside space-y-2 ml-4 text-on-surface-variant text-sm">
                                    ${strategicProblemDetails.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                <h5 class="font-bold text-sm text-primary mb-4">Strategic Choices</h5>
                                <div class="space-y-4">
                                    ${strategicChoices.map(choice => `
                                        <div class="bg-surface/50 rounded-lg p-4 border border-outline/20">
                                            <h6 class="font-semibold text-sm text-secondary mb-2">${choice.title}</h6>
                                            <p class="text-sm text-on-surface-variant mb-3">${choice.description}</p>
                                            <p class="text-xs text-on-surface-variant/80 italic"><strong>Why this choice matters:</strong> ${choice.rationale}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                         </div>
                    </div>
                `;
            }

            stepElement.innerHTML = `
                <div class="p-6 cursor-pointer step-header" role="button" aria-expanded="false" aria-controls="step-content-${step.id}">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-4 mb-2">
                                <div class="flex items-center justify-center w-12 h-12 rounded-full bg-primary-container text-on-primary-container font-bold text-3xl flex-shrink-0">${step.icon}</div>
                                <div>
                                    <h3 class="text-xl font-bold font-display text-on-surface">${step.title}</h3>
                                    ${step.workshop_date ? `<p class="text-on-surface-variant text-sm">Date: ${step.workshop_date}</p>` : ''}
                                </div>
                            </div>
                             <div class="ml-14 mt-3">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${getStatusClasses(step.status)}">${step.status.charAt(0).toUpperCase() + step.status.slice(1)}</span>
                            </div>
                        </div>
                        <svg class="chevron-icon w-6 h-6 text-on-surface-variant flex-shrink-0 mt-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" /></svg>
                    </div>
                </div>
                <div class="step-content" id="step-content-${step.id}">
                    <div class="pt-2 pb-6 pl-14">
                        ${goalsHtml}
                        ${accomplishmentHtml}
                        ${refinementHtml}
                        ${noteHtml}
                        ${challengeHtml}
                        ${whyThisMattersHtml}
                        ${outcomeHtml}
                        ${finalOutcomeHtml}
                        ${cascadeHtml}
                        ${workshopOutputHtml}
                        ${processHtml}
                    </div>
                </div>
            `;
            journeyContainer.appendChild(stepElement);
        });

        // Add event listeners for the accordion
        document.querySelectorAll('.step-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const parent = header.parentElement;
                const isExpanded = parent.classList.contains('expanded');
                
                header.setAttribute('aria-expanded', !isExpanded);

                document.querySelectorAll('#journey-steps-container .expanded').forEach(openItem => {
                    if (openItem !== parent) {
                        openItem.classList.remove('expanded');
                        openItem.querySelector('.step-header').setAttribute('aria-expanded', 'false');
                        openItem.querySelector('.step-content').style.maxHeight = '0';
                    }
                });

                parent.classList.toggle('expanded');
                if (!isExpanded) {
                    content.style.maxHeight = content.scrollHeight + "px";
                } else {
                    content.style.maxHeight = '0';
                }
            });
        });
        */ // End of removed legacy forEach loop
        
        // Function to render the process overview stepper
        function renderProcessOverview() {
            const container = document.getElementById('process-overview-container');
            if (!container) return;

            // Create the stepper navigation
            let stepperHtml = '<div class="relative">';
            
            // Mobile-first responsive stepper with proper ordering
            stepperHtml += '<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-2">';
            
            // Add connecting line for desktop
            stepperHtml += '<div class="absolute top-8 left-0 right-0 h-px bg-outline/30 hidden lg:block" aria-hidden="true"></div>';
            
            processOverviewData.forEach((step, index) => {
                stepperHtml += `
                    <div class="relative z-10 flex flex-col items-center text-center" style="order: ${index + 1};">
                        <div class="process-step-header cursor-pointer group" data-target="process-step-${step.id}">
                            <div class="step-circle w-16 h-16 rounded-full flex items-center justify-center bg-surface border-4 border-surface-variant transition-all duration-300 hover:border-primary/50 relative">
                                <div class="step-number absolute -top-2 -right-2 w-6 h-6 bg-primary text-on-primary rounded-full flex items-center justify-center text-xs font-bold">${step.id}</div>
                                <div class="step-icon text-on-surface-variant transition-colors duration-300">${step.icon}</div>
                            </div>
                            <h3 class="mt-3 font-display font-semibold text-on-surface text-sm leading-tight max-w-20">${step.title}</h3>
                        </div>
                    </div>`;
            });
            stepperHtml += '</div>';
            stepperHtml += '</div>';
            
            // Add content area
            stepperHtml += '<div id="process-content-area" class="mt-8"></div>';
            
            container.innerHTML = stepperHtml;

            // Add content area header (initially hidden)
            let contentPanelsHtml = '<div id="process-step-indicator" class="mb-4 p-4 bg-primary-container rounded-xl hidden"><h3 class="font-display font-semibold text-on-primary-container text-lg"></h3></div>';
            
            // Create content panels
            processOverviewData.forEach(step => {
                contentPanelsHtml += `
                    <div id="process-step-${step.id}" class="process-step-content bg-surface m3-surface-1 rounded-2xl">
                        <div class="p-6">
                            <h4 class="font-medium text-lg font-display text-primary mb-3">What We Do</h4>
                            <p class="text-on-surface-variant mb-4">${step.what}</p>
                            <h4 class="font-medium text-lg font-display text-primary mb-3">Why We Do It</h4>
                            <p class="text-on-surface-variant">${step.why}</p>
                        </div>
                    </div>`;
            });
            document.getElementById('process-content-area').innerHTML = contentPanelsHtml;

            // Add click handlers for process steps with mobile feedback
            document.querySelectorAll('.process-step-header').forEach(header => {
                header.addEventListener('click', () => {
                    const targetId = header.getAttribute('data-target');
                    const targetContent = document.getElementById(targetId);
                    const stepId = targetId.replace('process-step-', '');
                    const stepData = processOverviewData.find(s => s.id == stepId);
                    
                    // Remove active state from all steps
                    document.querySelectorAll('.process-step-header').forEach(h => h.classList.remove('active'));
                    document.querySelectorAll('.process-step-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active state to clicked step
                    header.classList.add('active');
                    targetContent.classList.add('active');
                    
                    // Update step indicator and show it
                    const indicator = document.getElementById('process-step-indicator');
                    if (indicator && stepData) {
                        indicator.innerHTML = `<h3 class="font-display font-semibold text-on-primary-container text-lg">Step ${stepData.id}: ${stepData.title}</h3>`;
                        indicator.classList.remove('hidden');
                    }
                    
                    // Smooth scroll to content area on mobile
                    if (window.innerWidth < 768) {
                        setTimeout(() => {
                            const contentArea = document.getElementById('process-content-area');
                            if (contentArea) {
                                contentArea.scrollIntoView({ 
                                    behavior: 'smooth', 
                                    block: 'start' 
                                });
                            }
                        }, 100);
                    }
                });
                
                // Add touch feedback for mobile
                header.addEventListener('touchstart', () => {
                    header.style.transform = 'scale(0.95)';
                });
                
                header.addEventListener('touchend', () => {
                    header.style.transform = 'scale(1)';
                });
            });

            // Don't auto-activate any step - leave all closed by default
        }

        // Force scroll to top immediately and prevent browser restoration
        if (history.scrollRestoration) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);
        
        // Function to render the cascade visualization
        function renderCascadeVisual() {
            renderDesktopCascade();
            renderMobileCascade();
        }

        function renderDesktopCascade() {
            const navigator = document.getElementById('cascade-navigator');
            const detailView = document.getElementById('cascade-detail-view');
            
            if (!navigator || !detailView) return;

            // Create cascade stages with improved colors and bidirectional arrows
            let navigatorHtml = '';
            cascadeData.forEach((stage, index) => {
                // Assign different colors for visual hierarchy
                let stageColor = 'bg-surface border-outline/30';
                let textColor = 'text-on-surface';
                
                if (index === 0) { // Aspiration - primary color
                    stageColor = 'bg-primary/10 border-primary/40';
                    textColor = 'text-primary';
                } else if (index === 1 || index === 2) { // Where/How - secondary
                    stageColor = 'bg-secondary/10 border-secondary/40';  
                    textColor = 'text-secondary';
                } else { // Capabilities/Systems - tertiary
                    stageColor = 'bg-tertiary/10 border-tertiary/40';
                    textColor = 'text-tertiary';
                }

                navigatorHtml += `
                    <div class="cascade-stage ${stageColor} rounded-xl p-5 border-2 shadow-sm hover:shadow-md transition-all duration-300" data-stage="${stage.id}">
                        <h3 class="font-display font-semibold text-base ${textColor} leading-tight">${stage.title}</h3>
                        <div class="flex items-center justify-between mt-3">
                            <div class="text-xs text-on-surface-variant/70 font-medium">Click to explore</div>
                            ${stage.feedbackTo ? `
                                <button class="feedback-arrow text-primary/60 hover:text-primary transition-colors p-1 rounded-full hover:bg-primary/10" data-feedback-to="${stage.feedbackTo}" title="Test against ${cascadeData.find(s => s.id === stage.feedbackTo)?.title}">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="4,4">
                                        <path d="M7 17l5-5-5-5M13 17l5-5-5-5"></path>
                                    </svg>
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
                
                // Add bidirectional arrows between stages
                if (index < cascadeData.length - 1) {
                    navigatorHtml += `
                        <div class="flex justify-center items-center space-x-2 my-2">
                            <!-- Downward primary arrow -->
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-primary">
                                <path d="M12 5v14M19 12l-7 7-7-7"></path>
                            </svg>
                            <!-- Upward feedback arrow -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-secondary/60" stroke-dasharray="3,3">
                                <path d="M12 19V5M5 12l7-7 7 7"></path>
                            </svg>
                        </div>
                    `;
                }
            });
            
            // Add final feedback loop from Systems back to Aspiration
            navigatorHtml += `
                <div class="flex justify-center items-center mt-4 pt-4 border-t border-outline/20">
                    <div class="flex items-center space-x-3 text-sm text-on-surface-variant">
                        <span class="font-medium">Complete Loop:</span>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-primary/70" stroke-dasharray="3,3">
                            <path d="M21 12a9 9 0 11-6.219-8.56"></path>
                            <path d="M15 4l4-1-1 4"></path>
                        </svg>
                        <span class="text-xs">Systems reinforce Aspiration</span>
                    </div>
                </div>
            `;
            
            navigator.innerHTML = navigatorHtml;
            
            // Add click handlers for stages
            document.querySelectorAll('.cascade-stage').forEach(stage => {
                stage.addEventListener('click', () => {
                    const stageId = stage.getAttribute('data-stage');
                    setActiveStage(stageId);
                });
            });
            
            // Add click handlers for feedback arrows
            document.querySelectorAll('.feedback-arrow').forEach(arrow => {
                arrow.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const targetStageId = arrow.getAttribute('data-feedback-to');
                    flashStage(targetStageId);
                });
            });
            
            // Don't set any initial active stage - leave all closed
        }

        function renderMobileCascade() {
            const accordion = document.getElementById('cascade-accordion');
            if (!accordion) return;

            let accordionHtml = '';
            cascadeData.forEach((stage, index) => {
                // Apply same color scheme as desktop
                let headerColor = 'bg-surface border-outline/30';
                let titleColor = 'text-on-surface';
                
                if (index === 0) {
                    headerColor = 'bg-primary/5 border-primary/30';
                    titleColor = 'text-primary';
                } else if (index === 1 || index === 2) {
                    headerColor = 'bg-secondary/5 border-secondary/30';  
                    titleColor = 'text-secondary';
                } else {
                    headerColor = 'bg-tertiary/5 border-tertiary/30';
                    titleColor = 'text-tertiary';
                }

                accordionHtml += `
                    <div class="cascade-accordion-item ${headerColor} rounded-xl overflow-hidden border-2 shadow-sm">
                        <div class="cascade-accordion-header p-5 cursor-pointer flex items-center justify-between" data-stage="${stage.id}">
                            <h3 class="font-display font-semibold text-lg ${titleColor} leading-tight">${stage.title}</h3>
                            <svg class="chevron w-6 h-6 text-on-surface-variant transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </div>
                        <div class="cascade-accordion-content">
                            <div class="p-5 pt-0 bg-surface/80">
                                <div class="border-l-4 border-primary pl-4 mb-5">
                                    <p class="text-on-surface-variant text-base leading-relaxed">${stage.content}</p>
                                </div>
                                
                                <div class="bg-surface-variant/40 rounded-lg p-4">
                                    <h4 class="font-display font-semibold text-on-surface mb-3 text-sm">Includes</h4>
                                    <div class="space-y-3">
                                        ${stage.details.map(detail => `
                                            <div class="flex items-start bg-surface rounded-lg p-3 border-l-3 border-secondary/40">
                                                <div class="w-2 h-2 bg-secondary rounded-full mt-1.5 mr-3 flex-shrink-0"></div>
                                                <div class="text-on-surface text-sm font-medium leading-relaxed">${detail}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                                
                                ${stage.feedbackTo ? `
                                    <div class="mt-4 p-4 bg-gradient-to-r from-primary-container/20 to-secondary-container/20 rounded-lg border border-primary/20">
                                        <div class="flex items-start">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="mr-3 mt-0.5 text-primary flex-shrink-0" stroke-dasharray="3,3">
                                                <path d="M21 12a9 9 0 11-6.219-8.56"></path>
                                                <path d="M15 4l4-1-1 4"></path>
                                            </svg>
                                            <div>
                                                <span class="font-display font-semibold text-primary text-sm">Feedback Loop</span>
                                                <p class="text-on-surface text-xs mt-1">Test against <span class="font-semibold text-secondary">"${cascadeData.find(s => s.id === stage.feedbackTo)?.title}"</span></p>
                                            </div>
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            accordion.innerHTML = accordionHtml;
            
            // Add mobile accordion click handlers
            document.querySelectorAll('.cascade-accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const chevron = header.querySelector('.chevron');
                    const isOpen = content.classList.contains('open');
                    
                    // Close all other accordions
                    document.querySelectorAll('.cascade-accordion-content').forEach(c => c.classList.remove('open'));
                    document.querySelectorAll('.chevron').forEach(c => c.style.transform = 'rotate(0deg)');
                    
                    // Toggle current accordion
                    if (!isOpen) {
                        content.classList.add('open');
                        chevron.style.transform = 'rotate(90deg)';
                    }
                });
            });
        }

        function setActiveStage(stageId) {
            // Update navigator active state
            document.querySelectorAll('.cascade-stage').forEach(stage => {
                stage.classList.remove('active');
            });
            document.querySelector(`[data-stage="${stageId}"]`).classList.add('active');
            
            // Update detail view with improved styling
            const stageData = cascadeData.find(s => s.id === stageId);
            const detailView = document.getElementById('cascade-detail-view');
            
            if (detailView && stageData) {
                detailView.innerHTML = `
                    <div class="detail-content active">
                        <div class="border-l-4 border-primary pl-6 mb-6">
                            <h3 class="text-2xl font-bold font-display text-primary mb-2">${stageData.title}</h3>
                            <p class="text-on-surface-variant text-lg leading-relaxed">${stageData.content}</p>
                        </div>
                        
                        <div class="bg-surface-variant/40 rounded-xl p-6">
                            <h4 class="font-display font-semibold text-lg text-on-surface mb-4 flex items-center">
                                <div class="w-3 h-3 bg-primary rounded-full mr-3"></div>
                                Includes
                            </h4>
                            <div class="space-y-4">
                                ${stageData.details.map(detail => `
                                    <div class="flex items-start bg-surface rounded-lg p-3 border-l-3 border-secondary/40">
                                        <div class="w-2 h-2 bg-secondary rounded-full mt-2 mr-3 flex-shrink-0"></div>
                                        <div class="text-on-surface font-medium text-sm leading-relaxed">${detail}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        ${stageData.feedbackTo ? `
                            <div class="mt-6 p-5 bg-gradient-to-r from-primary-container/20 to-secondary-container/20 rounded-xl border border-primary/20">
                                <div class="flex items-start">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" class="mr-4 mt-1 text-primary flex-shrink-0" stroke-dasharray="4,4">
                                        <path d="M21 12a9 9 0 11-6.219-8.56"></path>
                                        <path d="M15 4l4-1-1 4"></path>
                                    </svg>
                                    <div>
                                        <span class="font-display font-semibold text-primary text-lg">Feedback Loop</span>
                                        <p class="text-on-surface mt-1">These choices should be tested against and aligned with <span class="font-semibold text-secondary">"${cascadeData.find(s => s.id === stageData.feedbackTo)?.title}"</span></p>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }
        }

        function flashStage(stageId) {
            const stage = document.querySelector(`[data-stage="${stageId}"]`);
            if (stage) {
                stage.classList.add('stage-flash');
                setTimeout(() => {
                    stage.classList.remove('stage-flash');
                }, 800);
            }
        }

        window.addEventListener('load', () => {
            // Ensure page starts at the top (multiple attempts)
            setTimeout(() => window.scrollTo(0, 0), 0);
            setTimeout(() => window.scrollTo(0, 0), 50);
            setTimeout(() => window.scrollTo(0, 0), 100);
            
            renderCascadeVisual();
            renderProcessOverview();
            
            // Add smooth scrolling to navigation links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
        window.addEventListener('resize', renderCascadeVisual);

        // Function to create journey steps accordion
        function createJourneySteps() {
            const container = document.getElementById('journey-steps-container');
            
            container.innerHTML = journeyStepsData.map(step => {
                const statusClass = step.status === 'completed' ? 'status-completed' : 'status-upcoming';
                const statusText = step.status === 'completed' ? 'Completed' : 'Upcoming';
                
                return `
                    <div class="m3-surface-1 rounded-lg bg-surface border border-outline/20 overflow-hidden">
                        <button class="journey-step-button w-full px-6 py-4 text-left flex items-center justify-between hover:bg-surface-variant/30 transition-colors focus:outline-none focus:ring-2 focus:ring-primary/20"
                                onclick="toggleStep(${step.id})" 
                                aria-expanded="false" 
                                aria-controls="step-${step.id}-content">
                            <div class="flex items-center space-x-4">
                                <div class="flex-shrink-0 w-12 h-12 bg-primary text-on-primary rounded-full flex items-center justify-center font-display font-bold">
                                    ${step.icon}
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-display font-semibold text-lg text-on-surface">${step.title}</h3>
                                    <div class="flex items-center space-x-3 mt-1">
                                        <span class="text-sm text-on-surface-variant">${step.workshop_date}</span>
                                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusClass}">${statusText}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="chevron-icon text-on-surface-variant">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </button>
                        
                        <div id="step-${step.id}-content" class="step-content" aria-labelledby="step-${step.id}-button">
                            <div class="pb-6 space-y-6">
                                <!-- Goals Section -->
                                <div>
                                    <h4 class="font-display font-semibold text-base text-on-surface mb-3">Goals</h4>
                                    <ul class="space-y-2">
                                        ${step.goals.map(goal => `
                                            <li class="flex items-start space-x-2">
                                                <div class="w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"></div>
                                                <span class="text-on-surface-variant">${goal}</span>
                                            </li>
                                        `).join('')}
                                    </ul>
                                </div>

                                <!-- Accomplishments Section -->
                                <div>
                                    <h4 class="font-display font-semibold text-base text-on-surface mb-3">Key Accomplishments</h4>
                                    <p class="text-on-surface-variant">${step.accomplishments}</p>
                                </div>

                                <!-- Why This Matters Section -->
                                <div class="bg-primary-container/20 rounded-lg p-4">
                                    <h4 class="font-display font-semibold text-base text-on-surface mb-3 flex items-center">
                                        <svg class="w-5 h-5 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        Why This Matters
                                    </h4>
                                    <p class="text-on-surface-variant leading-relaxed">${step.whyThisMatters}</p>
                                </div>

                                <!-- Cascade Output Section (only for completed workshops) -->
                                ${step.cascadeOutput ? `
                                    <div>
                                        <h4 class="font-display font-semibold text-base text-on-surface mb-4">Strategic Cascade Output</h4>
                                        <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-1">
                                            ${step.cascadeOutput.aspiration ? `
                                                <div class="bg-surface-variant/30 rounded-lg p-4">
                                                    <h5 class="font-display font-medium text-sm text-primary mb-2">What is our Winning Aspiration?</h5>
                                                    <ul class="space-y-1 text-sm text-on-surface-variant">
                                                        ${step.cascadeOutput.aspiration.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                                    </ul>
                                                </div>
                                            ` : ''}
                                            ${step.cascadeOutput.where ? `
                                                <div class="bg-surface-variant/30 rounded-lg p-4">
                                                    <h5 class="font-display font-medium text-sm text-secondary mb-2">Where Will We Play?</h5>
                                                    <ul class="space-y-1 text-sm text-on-surface-variant">
                                                        ${step.cascadeOutput.where.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                                    </ul>
                                                </div>
                                            ` : ''}
                                            ${step.cascadeOutput.how ? `
                                                <div class="bg-surface-variant/30 rounded-lg p-4">
                                                    <h5 class="font-display font-medium text-sm text-secondary mb-2">How Will We Win?</h5>
                                                    <ul class="space-y-1 text-sm text-on-surface-variant">
                                                        ${step.cascadeOutput.how.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                                    </ul>
                                                </div>
                                            ` : ''}
                                            ${step.cascadeOutput.capabilities ? `
                                                <div class="bg-surface-variant/30 rounded-lg p-4">
                                                    <h5 class="font-display font-medium text-sm text-tertiary mb-2">What Capabilities Must We Have?</h5>
                                                    <ul class="space-y-1 text-sm text-on-surface-variant">
                                                        ${step.cascadeOutput.capabilities.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                                    </ul>
                                                </div>
                                            ` : ''}
                                            ${step.cascadeOutput.systems ? `
                                                <div class="bg-surface-variant/30 rounded-lg p-4">
                                                    <h5 class="font-display font-medium text-sm text-tertiary mb-2">What Management Systems Do We Need?</h5>
                                                    <ul class="space-y-1 text-sm text-on-surface-variant">
                                                        ${step.cascadeOutput.systems.map(item => `<li>‚Ä¢ ${item}</li>`).join('')}
                                                    </ul>
                                                </div>
                                            ` : ''}
                                        </div>
                                    </div>
                                ` : ''}

                                <!-- Workshop Output Section -->
                                ${step.workshopOutput ? `
                                    <div>
                                        <h4 class="font-display font-semibold text-base text-on-surface mb-4">Workshop Output</h4>
                                        <div class="space-y-4">
                                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                                <h5 class="font-display font-medium text-sm text-primary mb-2">Strategic Problem</h5>
                                                <p class="font-medium text-on-surface">${step.workshopOutput.strategicProblem}</p>
                                                <ul class="list-disc list-outside ml-5 mt-2 space-y-1 text-sm text-on-surface-variant">
                                                    ${step.workshopOutput.strategicProblemDetails.map(detail => `<li>${detail}</li>`).join('')}
                                                </ul>
                                            </div>
                                            <div class="bg-surface-variant/30 rounded-lg p-4">
                                                <h5 class="font-display font-medium text-sm text-primary mb-3">Strategic Choices</h5>
                                                <div class="space-y-3">
                                                ${step.workshopOutput.strategicChoices.map(choice => `
                                                    <div class="bg-surface/50 rounded-lg p-3 border-l-4 border-secondary">
                                                        <h6 class="font-semibold text-secondary mb-1">${choice.title}</h6>
                                                        <p class="text-sm text-on-surface-variant">${choice.description}</p>
                                                        <p class="text-xs text-on-surface-variant/80 mt-2 italic"><strong>Rationale:</strong> ${choice.rationale}</p>
                                                    </div>
                                                `).join('')}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Function to toggle accordion steps
        function toggleStep(stepId) {
            const button = document.querySelector(`button[onclick="toggleStep(${stepId})"]`);
            const content = document.getElementById(`step-${stepId}-content`);
            const parentDiv = button.closest('.m3-surface-1');
            
            const isExpanded = parentDiv.classList.contains('expanded');
            
            // Close all other expanded steps
            document.querySelectorAll('.expanded').forEach(el => {
                el.classList.remove('expanded');
                const btn = el.querySelector('.journey-step-button');
                if (btn) btn.setAttribute('aria-expanded', 'false');
            });
            
            // Toggle current step
            if (!isExpanded) {
                parentDiv.classList.add('expanded');
                button.setAttribute('aria-expanded', 'true');
            }
        }

        // Initialize the page - v2.1
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, starting page initialization');
            renderCascadeVisual();
            console.log('Cascade visual rendered, now creating journey steps');
            createJourneySteps();
            console.log('Journey steps creation completed');
            
            // Handle navigation buttons
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const targetId = this.getAttribute('data-target');
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        const offsetTop = targetElement.offsetTop - 80; // Account for sticky header
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // Handle responsive cascade visualization
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function() {
                    renderCascadeVisual();
                }, 250);
            });
        });

        // Add keyboard navigation for accessibility
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                const target = e.target;
                if (target.classList.contains('journey-step-button')) {
                    e.preventDefault();
                    target.click();
                }
            }
        });


    </script>
</body>
</html>
